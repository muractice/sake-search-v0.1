# STEP4: 記録管理機能 Phase2以降開発計画

## 📋 Phase 2（拡張機能）- 2週間

### 1. 写真アップロード機能
- **機能概要**
  - 日本酒ボトル・グラス・料理の写真（最大3枚）
  - 画像圧縮・リサイズ機能
  - Supabase Storageとの連携

- **実装内容**
  - 画像アップロードコンポーネント作成
  - react-dropzoneを使用した画像選択UI
  - 画像プレビュー機能
  - 自動圧縮（5MB制限）
  - record_imagesテーブルとの連携

### 2. カレンダー表示
- **機能概要**
  - 月別カレンダービューで記録を視覚化
  - 日付クリックで当日の記録表示
  - 記録数に応じた日付のハイライト

- **実装内容**
  - React-Calendarライブラリ導入
  - カレンダービューコンポーネント作成
  - 日付別記録数の集計機能
  - カレンダーとタイムラインの切り替えUI

### 3. 都道府県マップ
- **機能概要**
  - 飲んだ日本酒の産地を地図上に表示
  - 都道府県別の銘柄数カウント
  - 全国制覇率（47都道府県中の達成率）

- **実装内容**
  - Japan Map Reactライブラリ導入
  - 都道府県別統計データの集計
  - インタラクティブマップコンポーネント
  - 制覇率表示機能

### 4. フィルタリング・検索機能
- **機能概要**
  - 期間指定（今月/過去3ヶ月/過去1年）
  - 評価別フィルター（★4以上など）
  - 日本酒名・メモ内容での検索

- **実装内容**
  - 検索・フィルターUIコンポーネント
  - 複数条件での記録絞り込み機能
  - 検索結果のハイライト表示
  - フィルター状態の保存機能

## 🎮 Phase 3（ゲーミフィケーション）- 1週間

### 1. バッジシステム
- **記録数バッジ**
  - 初記録（1件）
  - ビギナー（10件）
  - レギュラー（50件）
  - ヘビーユーザー（100件）
  - マスター（500件）
  - レジェンド（1000件）

- **銘柄数バッジ**
  - 探求者（10銘柄）
  - 冒険者（50銘柄）
  - エキスパート（100銘柄）
  - ソムリエ（300銘柄）

- **地域制覇バッジ**
  - 地元通（1都道府県制覇）
  - 地方通（1地方制覇）
  - 全国通（全都道府県制覇）

- **特殊バッジ**
  - 連続記録（7日/30日/100日）
  - 季節限定酒マスター
  - 高評価マスター（★5を50件以上）

### 2. レベルシステム
- **機能概要**
  - 記録数に応じたレベルアップ
  - 称号システム（初心者→愛好家→マイスター）
  - プロフィールでのレベル・称号表示

- **実装内容**
  - user_statisticsテーブル拡張
  - レベル計算ロジック
  - バッジ獲得判定システム
  - アニメーション付きバッジ表示

### 3. 連続記録カウント
- **機能概要**
  - 日々の記録ストリーク機能
  - 連続記録日数の表示とバッジ
  - ストリーク切れ時の通知

- **実装内容**
  - 連続記録計算ロジック
  - ストリークカウンター表示
  - プッシュ通知機能（将来的）

## 📊 Phase 4（分析強化）- 1週間

### 1. 詳細統計グラフ
- **機能概要**
  - 月別・週別飲酒回数のグラフ表示
  - 評価分布グラフ
  - 味覚傾向チャート（甘辛・濃淡分析）

- **実装内容**
  - Chart.js or Rechartsライブラリ導入
  - 各種グラフコンポーネント作成
  - 統計データの集計・計算機能
  - レスポンシブなグラフ表示

### 2. 好みの傾向分析
- **機能概要**
  - 個人の味覚プロファイル生成
  - よく飲む酒蔵・地域の分析
  - 季節別の好みの変化

- **実装内容**
  - 好み分析アルゴリズム
  - 味覚プロファイル表示
  - トレンド分析機能
  - 個人レポート生成

### 3. お気に入りとの連携強化
- **機能概要**
  - 高評価（★4以上）の自動お気に入り提案
  - 記録データベースのレコメンド精度向上

- **実装内容**
  - 自動お気に入り提案機能
  - 記録データとお気に入りの連携強化
  - レコメンドアルゴリズムの改善

## 🚀 将来の拡張可能性

### Phase 5以降（検討項目）
1. **SNS機能**
   - 記録の共有・いいね・コメント
   - フォロー機能
   - タイムライン機能

2. **飲食店連携**
   - チェックイン機能
   - 飲食店レビュー連携
   - メニュー連携

3. **AI活用**
   - 味の好み予測
   - 写真からの銘柄自動認識
   - パーソナライズドレコメンド

4. **外部連携**
   - 日本酒サブスクとの連携
   - 酒蔵・イベント情報連携
   - 購入履歴連携

## 📋 技術実装優先度

### 高優先度（Phase 2で実装）
1. 写真アップロード機能
2. カレンダー表示
3. 基本的なフィルタリング

### 中優先度（Phase 3で実装）
1. バッジシステム
2. レベルシステム
3. 都道府県マップ

### 低優先度（Phase 4以降）
1. 詳細統計グラフ
2. 好み分析
3. 外部連携機能

## 📊 各Phase完了時の成果物

### Phase 2完了時
- 写真付きの豊富な記録作成機能
- 直感的なカレンダービュー
- 基本的な検索・フィルター機能
- 地図ベースの産地可視化

### Phase 3完了時
- ゲーミフィケーション要素による継続率向上
- バッジ・レベルによるユーザーモチベーション向上
- 産地制覇による探求心の促進

### Phase 4完了時
- データドリブンな好み分析
- パーソナライズされた体験
- 高度な統計・分析機能
- レコメンド精度の大幅向上

## 📈 成功指標（各Phase）

### Phase 2指標
- 写真付き記録率：50%以上
- カレンダービュー利用率：30%以上
- 検索機能利用率：20%以上

### Phase 3指標
- バッジ獲得ユーザー率：80%以上
- 連続記録達成率：40%以上（7日）
- ユーザー継続率：60%以上（3ヶ月）

### Phase 4指標
- 統計ページ閲覧率：70%以上
- 好み分析利用率：50%以上
- レコメンド精度向上：20%以上

---

**次のステップ**: Phase 2の写真アップロード機能から実装開始を推奨